{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://allergy-angel.local/schemas/health-event.v0.json",
  
    "title": "HealthEvent",
    "type": "object",
    "required": ["type", "confidence", "provenance", "needsClarification"],
    "properties": {
      "id": { "type": "string" },
      "type": {
        "type": "string",
        "enum": ["meal", "symptom", "medication", "supplement", "workout", "sleep", "glucose", "environment", "note"]
      },
      "startTime": { "type": "string" },
      "endTime": { "type": "string" },
      "fields": { "type": "object", "additionalProperties": true },
      "confidence": { "type": "number", "minimum": 0, "maximum": 1 },
      "confidenceLevel": { "type": "string", "enum": ["Low", "Medium", "High"] },
      "needsClarification": { "type": "boolean" },
      "provenance": {
        "type": "object",
        "required": ["sourceInputId", "sourceSpans", "modelVersion", "extractionVersion"],
        "properties": {
          "sourceInputId": { "type": "string" },
          "sourceSpans": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["field", "startChar", "endChar"],
              "properties": {
                "field": { "type": "string" },
                "startChar": { "type": "integer", "minimum": 0 },
                "endChar": { "type": "integer", "minimum": 0 }
              }
            }
          },
          "modelVersion": { "type": "string" },
          "extractionVersion": { "type": "string" }
        }
      }
    },
    "additionalProperties": false
  }
  